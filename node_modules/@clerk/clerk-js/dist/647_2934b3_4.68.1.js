"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[647],{3647:function(e,t,i){i.d(t,{$:function(){return v}});var a=i(2903),n=i(2784),o=i(5480),r=i(8173),l=i(3476),s=i(8690),u=i(4804),c=i(4334),d=i(1609),g=i(4095),m=i(2848),h=i(6884);const v=e=>{const t=(0,s.useCardState)(),i=(0,o.a2)({onNextStep:()=>t.setError(void 0)}),v=n.useRef(null),{createOrganization:p,isLoaded:b,setActive:f}=(0,r.useCoreOrganizationList)(),{organization:z}=(0,r.useCoreOrganization)(),[x,S]=n.useState(),C=(0,d.Yp)("name","",{type:"text",label:(0,c.u1)("formFieldLabel__organizationName"),placeholder:(0,c.u1)("formFieldInputPlaceholder__organizationName")}),Z=(0,d.Yp)("slug","",{type:"text",label:(0,c.u1)("formFieldLabel__organizationSlug"),placeholder:(0,c.u1)("formFieldInputPlaceholder__organizationSlug")}),_=!!C.value,B=()=>{var t;e.navigateAfterCreateOrganization(v.current),null===(t=e.onComplete)||void 0===t||t.call(e)},P=e=>{Z.setValue(e)},T="organizationList"===e.flow?"xlargeMedium":void 0,y="organizationList"===e.flow?"headingRegularRegular":void 0;return(0,a.BX)(o.en,{...i.props,children:[(0,a.tZ)(s.ContentPage,{Breadcrumbs:null,headerTitle:e.startPage.headerTitle,headerSubtitle:e.startPage.headerSubtitle,headerTitleTextVariant:T,headerSubtitleTextVariant:y,sx:e=>({minHeight:e.sizes.$60}),children:(0,a.BX)(s.Form.Root,{onSubmit:async a=>{var n;if(a.preventDefault(),_&&b)try{const t=await p({name:C.value,slug:Z.value});if(x&&await t.setLogo({file:x}),v.current=t,await f({organization:t}),null!==(n=e.skipInvitationScreen)&&void 0!==n?n:1===t.maxAllowedMemberships)return B();i.nextStep()}catch(e){(0,d.S3)(e,[C,Z],t.setError)}},children:[(0,a.tZ)(h.D,{organization:{name:C.value},onAvatarChange:async e=>await S(e),onAvatarRemove:x?()=>(t.setIdle(),S(null)):null,avatarPreviewPlaceholder:(0,a.tZ)(s.IconButton,{variant:"ghost",colorScheme:"neutral","aria-label":"Upload organization logo",icon:(0,a.tZ)(l.Icon,{size:"md",icon:u.gq,sx:e=>({transitionDuration:e.transitionDuration.$controls})}),sx:e=>({width:e.sizes.$11,height:e.sizes.$11,borderRadius:e.radii.$md,backgroundColor:e.colors.$avatarBackground,":hover":{backgroundColor:d.O9.makeTransparent(e.colors.$avatarBackground,.2),svg:{transform:"scale(1.2)"}}})})}),(0,a.tZ)(s.Form.ControlRow,{elementId:C.id,children:(0,a.tZ)(s.Form.Control,{sx:{flexBasis:"80%"},autoFocus:!0,...C.props,onChange:e=>{C.setValue(e.target.value),P((0,d.qi)(e.target.value))},required:!0})}),(0,a.tZ)(s.Form.ControlRow,{elementId:Z.id,children:(0,a.tZ)(s.Form.Control,{sx:{flexBasis:"80%"},...Z.props,onChange:e=>{P(e.target.value)},icon:u.Zc,required:!0})}),(0,a.BX)(s.FormButtonContainer,{children:[(0,a.tZ)(s.Form.SubmitButton,{block:!1,isDisabled:!_,localizationKey:(0,c.u1)("createOrganization.formButtonSubmit")}),e.onCancel&&(0,a.tZ)(s.Form.ResetButton,{localizationKey:(0,c.u1)("userProfile.formButtonReset"),block:!1,onClick:e.onCancel})]})]})}),(0,a.tZ)(s.ContentPage,{Breadcrumbs:null,headerTitle:(0,c.u1)("organizationProfile.invitePage.title"),headerTitleTextVariant:T,headerSubtitleTextVariant:y,sx:e=>({minHeight:e.sizes.$60}),children:z&&(0,a.tZ)(g.l,{resetButtonLabel:(0,c.u1)("createOrganization.invitePage.formButtonReset"),onSuccess:i.nextStep,onReset:B})}),(0,a.tZ)(s.SuccessPage,{title:(0,c.u1)("organizationProfile.invitePage.title"),headerTitleTextVariant:T,contents:(0,a.tZ)(m.a,{}),sx:e=>({minHeight:e.sizes.$60}),onFinish:B})]})}},4095:function(e,t,i){i.d(t,{l:function(){return v}});var a=i(2903),n=i(221),o=i(2784),r=i(8173),l=i(3476),s=i(8690),u=i(5802),c=i(4334),d=i(3736),g=i(1609),m=i(9654);const h=e=>/^\S+@\S+\.\S+$/.test(e),v=e=>{const{navigate:t}=(0,d.useRouter)(),{onSuccess:i,onReset:u=(()=>t("..")),resetButtonLabel:m}=e,{organization:v,invitations:b}=(0,r.useCoreOrganization)({invitations:{pageSize:10,keepPreviousData:!0}}),f=(0,s.useCardState)(),{t:z,locale:x}=(0,c.zJ)(),[S,C]=(0,o.useState)(!1),Z=(0,g.Yp)("emailAddress","",{type:"text",label:(0,c.u1)("formFieldLabel__emailAddresses")}),_=(0,g.Yp)("role","",{label:(0,c.u1)("formFieldLabel__role")});if(!v)return null;const{props:{setError:B,setWarning:P,setSuccess:T,setInfo:y,validatePassword:R,setHasPassedComplexity:w,hasPassedComplexity:k,feedback:F,feedbackType:$,clearFeedback:D,...L}}=Z,I=(!!Z.value.length||S)&&!!_.value;return(0,a.BX)(s.Form.Root,{onSubmit:e=>{e.preventDefault();const t=new FormData(e.currentTarget);return v.inviteMembers({emailAddresses:Z.value.split(","),role:t.get("role")}).then((async()=>{var e;return await(null===(e=null==b?void 0:b.revalidate)||void 0===e?void 0:e.call(b)),i()})).catch((e=>{var t,i,a;if((0,n.kD)(e)&&(e=>{var t,i,a,n;const o=new Set([...null!==(i=null===(t=e.meta)||void 0===t?void 0:t.emailAddresses)&&void 0!==i?i:[],...null!==(n=null===(a=e.meta)||void 0===a?void 0:a.identifiers)&&void 0!==n?n:[]]),r=Z.value.split(",");Z.setValue(r.filter((e=>!o.has(e))).join(","))})(e.errors[0]),(0,n.kD)(e)&&"duplicate_record"===(null===(i=null===(t=e.errors)||void 0===t?void 0:t[0])||void 0===i?void 0:i.code)){const t=(null===(a=e.errors[0].meta)||void 0===a?void 0:a.emailAddresses)||[];f.setError(z((0,c.u1)("organizationProfile.invitePage.detailsTitle__inviteFailed",{email_addresses:(0,g.z$)(t,x)})))}else(0,g.S3)(e,[],f.setError)}))},children:[(0,a.tZ)(s.Form.ControlRow,{elementId:Z.id,children:(0,a.BX)(l.Flex,{direction:"col",gap:2,sx:{width:"100%"},children:[(0,a.tZ)(l.Text,{localizationKey:(0,c.u1)("formFieldLabel__emailAddresses")}),(0,a.tZ)(l.Text,{localizationKey:(0,c.u1)("formFieldInputPlaceholder__emailAddresses"),colorScheme:"neutral",sx:e=>({fontSize:e.fontSizes.$xs})}),(0,a.tZ)(s.TagInput,{...L,autoFocus:!0,validate:h,sx:{width:"100%"},validateUnsubmittedEmail:e=>C(h(e))})]})}),(0,a.tZ)(p,{..._}),(0,a.BX)(s.FormButtonContainer,{children:[(0,a.tZ)(s.Form.SubmitButton,{block:!1,isDisabled:!I,localizationKey:(0,c.u1)("organizationProfile.invitePage.formButtonPrimary__continue")}),(0,a.tZ)(s.Form.ResetButton,{localizationKey:m||(0,c.u1)("userProfile.formButtonReset"),block:!1,onClick:u})]})]})},p=e=>{const{options:t,isLoading:i}=(0,u.e)();return(0,a.tZ)(s.Form.ControlRow,{elementId:e.id,children:(0,a.BX)(l.Flex,{direction:"col",gap:2,children:[(0,a.tZ)(l.Text,{localizationKey:e.label}),(0,a.tZ)(m.DQ,{...e.props,roles:t,isDisabled:i,onChange:t=>e.setValue(t),triggerSx:e=>({width:e.sizes.$48,justifyContent:"space-between",display:"flex"}),optionListSx:e=>({minWidth:e.sizes.$48})})]})})}},2848:function(e,t,i){i.d(t,{a:function(){return v},F:function(){return h}});var a=i(2903),n=i(996),o=i(5480),r=i(8173),l=i(3476),s=i(8690),u=i(4804),c=i(3736);const d=({__unstable_manageBillingUrl:e,__unstable_manageBillingMembersLimit:t})=>{const i=(0,c.useRouter)();return(0,a.BX)(l.Flex,{sx:e=>({background:e.colors.$blackAlpha50,padding:e.space.$4,borderRadius:e.radii.$md}),children:[(0,a.tZ)(l.AlertIcon,{variant:"warning",colorScheme:"danger",sx:e=>({marginTop:e.space.$1})}),(0,a.BX)(l.Text,{variant:"regularRegular",sx:e=>({fontWeight:e.fontWeights.$normal,lineHeight:e.lineHeights.$tall}),children:["This organization is limited to ",(0,n.OR)(t)," members.",(0,a.tZ)("br",{}),(0,a.tZ)(l.Link,{variant:"regularRegular",sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,fontWeight:e.fontWeights.$normal}),onClick:()=>i.navigate((0,n.OR)(e)),children:"Upgrade for unlimited members"})]})]})};var g=i(4095),m=i(2609);const h=(0,s.withCardStateProvider)((()=>{const e=(0,l.localizationKeys)("organizationProfile.invitePage.title"),t=(0,l.localizationKeys)("organizationProfile.invitePage.subtitle"),i=(0,s.useCardState)(),u=(0,o.a2)({onNextStep:()=>i.setError(void 0)}),{organization:c}=(0,r.useCoreOrganization)(),{__unstable_manageBillingUrl:h,__unstable_manageBillingMembersLimit:p}=(0,r.useOrganizationProfileContext)();if(!c)return null;const b=!!p&&(0,n.OR)(p)<=c.pendingInvitationsCount+c.membersCount;return(0,a.BX)(o.en,{...u.props,children:[(0,a.BX)(s.ContentPage,{headerTitle:e,headerSubtitle:t,Breadcrumbs:m.G,children:[b&&h&&(0,a.tZ)(d,{__unstable_manageBillingUrl:h,__unstable_manageBillingMembersLimit:p}),(0,a.tZ)(g.l,{onSuccess:u.nextStep})]}),(0,a.tZ)(s.SuccessPage,{title:e,contents:(0,a.tZ)(v,{}),Breadcrumbs:m.G})]})})),v=()=>(0,a.BX)(l.Flex,{direction:"col",center:!0,gap:4,children:[(0,a.tZ)(s.IconCircle,{boxElementDescriptor:l.descriptors.invitationsSentIconBox,iconElementDescriptor:l.descriptors.invitationsSentIcon,icon:u.GT}),(0,a.tZ)(l.Text,{localizationKey:(0,l.localizationKeys)("organizationProfile.invitePage.successMessage")})]})},9654:function(e,t,i){i.d(t,{DQ:function(){return c},RN:function(){return u},wQ:function(){return l}});var a=i(2903),n=(i(2784),i(3476)),o=i(8690),r=i(5802);const l=e=>{const{headers:t,page:i,onPageChange:r,rows:l,isLoading:u,itemCount:c,itemsPerPage:d,pageCount:g,emptyStateLocalizationKey:m}=e,h=c>0?Math.max(0,(i-1)*d)+1:0,v=Math.min(i*d,c);return(0,a.BX)(n.Col,{gap:4,sx:{width:"100%"},children:[(0,a.tZ)(n.Flex,{sx:{overflowX:"auto"},children:(0,a.BX)(n.Table,{sx:{width:"100%"},children:[(0,a.tZ)(n.Thead,{children:(0,a.tZ)(n.Tr,{children:t.map(((e,t)=>(0,a.tZ)(n.Th,{elementDescriptor:n.descriptors.tableHead,localizationKey:e},t)))})}),(0,a.tZ)(n.Tbody,{children:u?(0,a.tZ)(n.Tr,{children:(0,a.tZ)(n.Td,{colSpan:4,children:(0,a.tZ)(n.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"}})})}):l.length?l:(0,a.tZ)(s,{localizationKey:m},"empty")})]})}),(0,a.tZ)(o.Pagination,{count:g,page:i,onChange:r,siblingCount:1,rowInfo:{allRowsCount:c,startingRow:h,endingRow:v}})]})},s=e=>(0,a.tZ)(n.Tr,{children:(0,a.tZ)(n.Td,{colSpan:4,children:(0,a.tZ)(n.Text,{localizationKey:e.localizationKey,sx:e=>({margin:"auto",display:"block",width:"fit-content",fontSize:e.fontSizes.$xs})})})}),u=e=>(0,a.tZ)(n.Tr,{...e,sx:e=>({":hover":{backgroundColor:e.colors.$blackAlpha50}})}),c=e=>{const{value:t,roles:i,onChange:n,isDisabled:l,triggerSx:s,optionListSx:u}=e,c=!i,d=[{label:"admin",value:"admin"},{label:"basic_member",value:"basic_member"}],{localizeCustomRole:g}=(0,r.q)(),m=[...i||[],...d,{label:"guest_member",value:"guest_member"}].find((e=>e.value===t)),h=(c?d:i).map((e=>({value:e.value,label:g(e.value)||e.label})));return(0,a.BX)(o.Select,{elementId:"role",options:h,value:t,onChange:e=>n(e.value),children:[(0,a.tZ)("input",{name:"role",type:"hidden",value:t}),(0,a.tZ)(o.SelectButton,{sx:s||(e=>({color:e.colors.$colorTextSecondary,backgroundColor:"transparent"})),isDisabled:l,children:g(null==m?void 0:m.value)||(null==m?void 0:m.label)}),(0,a.tZ)(o.SelectOptionList,{sx:u})]})}},6884:function(e,t,i){i.d(t,{D:function(){return r}});var a=i(2903),n=i(8690),o=i(4334);const r=e=>{const{organization:t,...i}=e;return(0,a.tZ)(n.AvatarUploader,{...i,title:(0,o.u1)("userProfile.profilePage.imageFormTitle"),avatarPreview:(0,a.tZ)(n.OrganizationAvatar,{size:e=>e.sizes.$11,...t})})}},2609:function(e,t,i){i.d(t,{G:function(){return u},M:function(){return s}});var a=i(2903),n=(i(2784),i(5480)),o=i(8246),r=i(8173),l=i(8690);const s=e=>{const{organization:t}=(0,r.useCoreOrganization)(),{pages:i}=(0,r.useOrganizationProfileContext)(),{isAuthorizedUser:s}=(0,n.DD)((e=>e({permission:"org:sys_memberships:read"})||e({permission:"org:sys_memberships:manage"})));return t?(0,a.BX)(l.NavbarContextProvider,{children:[(0,a.tZ)(l.NavBar,{header:(0,a.tZ)(l.OrganizationPreview,{size:"sm",organization:t,sx:e=>({margin:`0 0 ${e.space.$4} ${e.space.$2}`})}),routes:i.routes.filter((e=>e.id!==o.b.MEMBERS||e.id===o.b.MEMBERS&&s)),contentRef:e.contentRef}),e.children]}):null},u=e=>{const{pages:t}=(0,r.useOrganizationProfileContext)();return(0,a.tZ)(l.Breadcrumbs,{...e,pageToRootNavbarRoute:t.pageToRootNavbarRouteMap})}}}]);